<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<title>Maracuya - Virtual Jukebox, lan mp3 player</title>
<script type="text/javascript">
var current = {width: 640, height: 1136};
function setWidthHeightFromHash(hash) { 
	if (!hash && hash.length <= 1) {
		return;
	}
	hash = hash.substring(1);
	hash = hash.split('/');
	if (hash[2] === "true") {
		setWidthHeightWithOrientation(hash[0], hash[1], hash[2] === "true" ? "vertical" : "horizontal");
	} else {
		setWidthHeightWithOrientation(hash[1], hash[0], hash[2] === "true" ? "vertical" : "horizontal");
	}
}
function setWidthHeight(w, h, v) {
	current = {width: w, height: h, vertical: v};
	document.getElementsByTagName("div")[0].style.cssText = "width: " + w + "px; height: " + h + "px";
}

function orientationChange(orientation) {
	if (current && current.vertical !== orientation) {
		setWidthHeight(current.height, current.width, orientation);
		updateHash(current);
	}
}

function updateHash(w, h, vertical) {
	if (typeof(w) === "object" ) {
		vertical = w.vertical;
		h = w.height;
		w = w.width;
	}
	location.hash = "#" + w + "/" + h + "/" + vertical;
}

function setWidthHeightWithOrientation(w, h, o) {
		switch(o) {
			case "vertical":
				setWidthHeight(w, h, true);
				break;
			case "horizontal":
			default:
				setWidthHeight(h, w, false);
				break;
		}
		setTimeout(function () {
			var v = h+"x"+w;
			document.getElementsByTagName("form")[0].elements.device.value=v;
			document.getElementsByTagName("form")[0].elements.orientation.value=o;
			updateHash(current);
		}, 1);
}

onload = function () {
	document.getElementsByTagName("select")[0].onchange = function (e) {
		var size = this.value.split("x"),
			height = size[0],
			width = size[1];
			
		setWidthHeightWithOrientation(width, height, this.form.elements.orientation.value);
	};
	document.getElementsByTagName("form")[0].addEventListener("click", function (e) {
		if (!/input/i.test(e.target.nodeName)) {
			return;
		}
		orientationChange(this.elements.orientation.value === "vertical");
	});
};
</script>
<style>
form {
	margin: 0;
	padding: 0;
}
.container {
	background-repeat: no-repeat;
	width: 640px;
	height: 960px;
}
.container iframe {
	margin-top: 7px;
	margin-left: 26px;
	width: 100%;
	height: 100%;
}
#deviceSelection {
	margin-left: 30px;
	padding-top: 50px;
}
</style>
<body>
<div class="container">
<div id="deviceSelection">
<form>
	<select name="device">
		<option value="960x640">iPhone Retina</option>
		<option value="1136x640" selected="selected">iPhone 5</option>
		<option value="1024x768">iPad</option>
		<option value="2048x1536">iPad Retina</option>
	</select>
	<label><input type="radio" name="orientation" value="vertical" checked="checked">Vertical</label>
	<label><input type="radio" name="orientation" value="horizontal">Horizontal</label>
</form>
</div>
<script>setWidthHeightFromHash(location.hash);</script>
<iframe src="mobile.html" frameborder="no" />
</div>
</body>
</html>

